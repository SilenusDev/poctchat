<section class="minor">
  <div class="section-form">
  <h2>Modifier mon profil</h2>
  <form [formGroup]="userUpdateForm" (ngSubmit)="submit()">
    <div class="form-field hidden-field">
      <label for="id">id</label>
      <input type="number" id="id" formControlName="id" class="form-control">
    </div>
    
    <div class="form-field">
      <label for="name">Nom</label>
      <input type="text" id="name" formControlName="name" class="form-control">
      <div *ngIf="userUpdateForm.get('name')?.invalid && userUpdateForm.get('name')?.touched" class="error-message">
        <small *ngIf="userUpdateForm.get('name')?.errors?.['required']">Le nom est requis</small>
        <small *ngIf="userUpdateForm.get('name')?.errors?.['pattern']">Le nom ne doit contenir que des caractères normaux</small>
      </div>
    </div>
    
    <div class="form-field">
      <label for="email">Email</label>
      <input type="email" id="email" formControlName="email" class="form-control">
      <div *ngIf="userUpdateForm.get('email')?.invalid && userUpdateForm.get('email')?.touched" class="error-message">
        <small *ngIf="userUpdateForm.get('email')?.errors?.['required']">L'email est requis</small>
        <small *ngIf="userUpdateForm.get('email')?.errors?.['email']">L'email doit être valide</small>
      </div>
    </div>

    <div class="form-field">
      <label for="password">Mot de passe</label>
      <input type="password" id="password" formControlName="password" class="form-control">
      <div *ngIf="userUpdateForm.get('password')?.invalid && userUpdateForm.get('password')?.touched" class="error-message">
        <small *ngIf="userUpdateForm.get('password')?.errors?.['required']">Le mot de passe est requis</small>
        <small *ngIf="userUpdateForm.get('password')?.errors?.['pattern']">Le mot de passe doit contenir au moins une majuscule, une minuscule, un chiffre et un caractère spécial</small>
      </div>
    </div>
    
    <button type="submit" class="btn-prim" [disabled]="userUpdateForm.invalid">
      Mettre à jour mon profil
    </button>
  </form>
  </div>
</section>
<div class="liner"><hr></div>
  

<section class="major">
    <h2>Abonnements</h2>
    <div class="card-container">
      <div class="card" *ngFor="let subject of subjects">
        <div class="card-body">
          <h5 class="card-title">{{ subject.name }}</h5>
          <p class="card-text">{{ subject.description }}</p>
          
          <!-- Formulaire de désabonnement -->
          <form [formGroup]="unsubscribeForms[subject.id]" (ngSubmit)="onUnsubscribe(subject.id)">
            <input type="hidden" formControlName="userId">
            <input type="hidden" formControlName="subjectId">
            <button type="submit" class="btn-outline-prim">Se désabonner</button>
          </form>
        </div>
      </div>
    </div>
    <div *ngIf="subjects.length === 0" class="no-subscriptions">
      Vous n'êtes abonné à aucun sujet.
    </div>
</section>



<!-- <div class="me">
    <section class="major">
      <h2>Abonnements</h2>
      <div class="card-container">
        <div class="card" *ngFor="let subject of subjects">
          <div class="card-body">
            <h5 class="card-title">{{ subject.name }}</h5>
            <p class="card-text">{{ subject.description }}</p>
            <button class="btn btn-danger" (click)="unsubscribe(subject.id)">
              Se désabonner
            </button>
          </div>
        </div>
      </div>
      <div *ngIf="subjects.length === 0" class="no-subscriptions">
        Vous n'êtes abonné à aucun sujet.
      </div>
    </section>
  </div> -->
